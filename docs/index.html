<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amaru Simón Agüero Jiménez">

<title>Epidemiology and Machine Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="index_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="index_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-administration-and-r-packages" id="toc-data-administration-and-r-packages" class="nav-link active" data-scroll-target="#data-administration-and-r-packages"><span class="header-section-number">1</span> Data administration and R packages</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods"><span class="header-section-number">2</span> Methods</a>
  <ul class="collapse">
  <li><a href="#description-of-the-dataset" id="toc-description-of-the-dataset" class="nav-link" data-scroll-target="#description-of-the-dataset"><span class="header-section-number">2.1</span> Description of the dataset</a></li>
  </ul></li>
  <li><a href="#missing-data" id="toc-missing-data" class="nav-link" data-scroll-target="#missing-data"><span class="header-section-number">3</span> Missing Data</a>
  <ul class="collapse">
  <li><a href="#machine-learning-unsupervised" id="toc-machine-learning-unsupervised" class="nav-link" data-scroll-target="#machine-learning-unsupervised"><span class="header-section-number">3.1</span> Machine learning Unsupervised</a>
  <ul class="collapse">
  <li><a href="#k-modes-clustering" id="toc-k-modes-clustering" class="nav-link" data-scroll-target="#k-modes-clustering"><span class="header-section-number">3.1.1</span> K-Modes Clustering</a></li>
  <li><a href="#hierarchical-clustering" id="toc-hierarchical-clustering" class="nav-link" data-scroll-target="#hierarchical-clustering"><span class="header-section-number">3.1.2</span> Hierarchical Clustering</a></li>
  <li><a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization"><span class="header-section-number">3.1.3</span> Visualization</a></li>
  </ul></li>
  <li><a href="#machine-learning-supervised" id="toc-machine-learning-supervised" class="nav-link" data-scroll-target="#machine-learning-supervised"><span class="header-section-number">3.2</span> Machine Learning Supervised</a>
  <ul class="collapse">
  <li><a href="#dataset-splitting" id="toc-dataset-splitting" class="nav-link" data-scroll-target="#dataset-splitting"><span class="header-section-number">3.2.1</span> Dataset splitting</a></li>
  <li><a href="#models" id="toc-models" class="nav-link" data-scroll-target="#models"><span class="header-section-number">3.2.2</span> Models</a></li>
  <li><a href="#evaluation-metrics" id="toc-evaluation-metrics" class="nav-link" data-scroll-target="#evaluation-metrics"><span class="header-section-number">3.2.3</span> Evaluation Metrics</a></li>
  <li><a href="#model-comparison" id="toc-model-comparison" class="nav-link" data-scroll-target="#model-comparison"><span class="header-section-number">3.2.4</span> Model Comparison</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">4</span> Results</a>
  <ul class="collapse">
  <li><a href="#machine-learning-unsupervised-1" id="toc-machine-learning-unsupervised-1" class="nav-link" data-scroll-target="#machine-learning-unsupervised-1"><span class="header-section-number">4.1</span> Machine learning Unsupervised</a>
  <ul class="collapse">
  <li><a href="#k-modes-clustering-1" id="toc-k-modes-clustering-1" class="nav-link" data-scroll-target="#k-modes-clustering-1"><span class="header-section-number">4.1.1</span> K-Modes clustering</a></li>
  <li><a href="#hierarchical-clustering-1" id="toc-hierarchical-clustering-1" class="nav-link" data-scroll-target="#hierarchical-clustering-1"><span class="header-section-number">4.1.2</span> Hierarchical clustering</a></li>
  </ul></li>
  <li><a href="#machine-learning-supervised-1" id="toc-machine-learning-supervised-1" class="nav-link" data-scroll-target="#machine-learning-supervised-1"><span class="header-section-number">4.2</span> Machine Learning Supervised</a>
  <ul class="collapse">
  <li><a href="#cross-validation-with-10-k-fold" id="toc-cross-validation-with-10-k-fold" class="nav-link" data-scroll-target="#cross-validation-with-10-k-fold"><span class="header-section-number">4.2.1</span> Cross Validation with 10 K-fold</a></li>
  <li><a href="#bootstrap" id="toc-bootstrap" class="nav-link" data-scroll-target="#bootstrap"><span class="header-section-number">4.2.2</span> Bootstrap</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Epidemiology and Machine Learning</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amaru Simón Agüero Jiménez <a href="mailto:amaruaguero2004@ug.uchile.cl" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0001-7336-1833" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-administration-and-r-packages" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Data administration and R packages</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>install_and_load_packages <span class="ot">&lt;-</span> <span class="cf">function</span>(packages) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (package <span class="cf">in</span> packages) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(package, <span class="at">character.only =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">install.packages</span>(package)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">library</span>(package, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>necessary_packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"knitr"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"janitor"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"tidyverse"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"naniar"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"data.table"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"writexl"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"ROCR"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"table1"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"DT"</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"FactoMineR"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"factoextra"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"vcd"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"reshape2"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"klaR"</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"data.tree"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"randomForest"</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"haven"</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"class"</span>,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"pROC"</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"kableExtra"</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hmisc"</span>,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"labelled"</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"cluster"</span>,</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"performance"</span>, </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"party"</span>, </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"caret"</span>, </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"rpart"</span>, </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"partykit"</span>,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"kernlab"</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="fu">install_and_load_packages</span>(necessary_packages)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">echo =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">warning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="methods" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Methods</h1>
<section id="description-of-the-dataset" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="description-of-the-dataset"><span class="header-section-number">2.1</span> Description of the dataset</h2>
<p>The Chile National Health Survey 2016-2017 (Encuesta Nacional de Salud 2016-2017) was conducted by the Department of Epidemiology of the Ministry of Health of Chile. This survey aimed to develop preventive health policies by collecting data from citizens aged 15 and over regarding their health status and subsequent treatment of illnesses.</p>
<p>The survey employed a probabilistic, geographically stratified, and multistage sampling design, ensuring national, regional, and urban-rural representativeness. A total of 6,233 individuals participated, with 5,520 undergoing laboratory tests.</p>
<ul>
<li><p>Data collection encompassed a wide range of health-related topics, including:</p></li>
<li><p><strong>Chronic diseases:</strong> hypertension, diabetes, cardiovascular diseases, and chronic kidney diseases.</p></li>
<li><p>Mental health: depressive symptoms and other mental health conditions.</p></li>
<li><p>Lifestyle factors: alcohol and tobacco use, physical activity, and dietary habits.</p></li>
<li><p><strong>Nutritional status:</strong> assessments of obesity, undernutrition, and micronutrient deficiencies.</p></li>
<li><p>Oral health: evaluation of dental caries and other oral health issues.</p></li>
<li><p>Preventive behaviors: screening practices for various cancers and chronic diseases.</p></li>
</ul>
<p>The information gathered is vital for formulating prevention plans, healthcare strategies, and public health policies tailored to the needs of the population. EPI MINSAL</p>
<p>For more detailed information and access to the survey’s datasets, you can visit the Department of Epidemiology’s <a href="https://epi.minsal.cl/bases-de-datos/">website</a>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="fu">gsub</span>(<span class="st">"/docs"</span>, <span class="st">""</span>, <span class="fu">getwd</span>()), <span class="st">"/data/data.sav"</span>),</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">encoding =</span> <span class="st">"latin1"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.labelled), to_factor))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="co">#"IdEncuesta",</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Sexo"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Edad"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Region"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"NEDU1_MINSAL_1"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Zona"</span>,<span class="st">"die1a"</span>, <span class="st">"die2"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"die3"</span>, <span class="st">"die4"</span>, <span class="st">"die5"</span>, <span class="st">"die6"</span>, <span class="st">"die8"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"die10_a"</span>, <span class="st">"die10_b"</span>, <span class="st">"die10_c"</span>, <span class="st">"die10_d"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"die11"</span>, <span class="st">"die12e"</span>, <span class="st">"die13e"</span>, <span class="st">"die14"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"SINDROME_METABOLICO"</span><span class="co">#,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                             <span class="co">#"Conglomerado",</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                             <span class="co">#"Estrato",</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                             <span class="co">#"Fexp_F1p_Corr"</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                             ) <span class="sc">%&gt;%</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">die3 =</span> <span class="fu">fct_na_value_to_level</span>(die3, <span class="st">"NO CONSUME LACTEOS"</span>))</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># column_labels &lt;- sapply(var_label(select_data), function(x) ifelse(is.null(x), NA, as.character(x)))</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># colnames(select_data) &lt;- ifelse(is.na(column_labels), colnames(select_data), column_labels)</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(select_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sexo"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Edad"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Región"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nivel Educacional"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Zona"</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Pescado/Mariscos"</span>,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Lácteos"</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tipo de Lácteos"</span>,</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Cereales Integrales"</span>,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Legumbres"</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Días Frutas/Semana"</span>,</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Días Verduras/Semana"</span>,</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia de V. Ingredientes"</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia de V. Tabla Nutricional"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia de V. Sellos"</span>,</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia de V. Mensajes Saludables"</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Agua/Día"</span>,</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Bebidas Azucaradas"</span>,</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Jugo Azucarado"</span>,</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tipo de Aceite"</span>,</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Síndrome Metabólico"</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"MUY BAJO"</span>,</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"BAJO"</span>,</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">"ADECUADO"</span>,</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Agua/Día</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">"ALTO"</span>,</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"MUY BAJO"</span>, <span class="st">"BAJO"</span>, <span class="st">"ADECUADO"</span>, <span class="st">"ALTO"</span>)),</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"NO CONSUME"</span>,</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"OCASIONAL"</span>,</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"FRECUENTE"</span>,</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Bebidas Azucaradas</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"ALTO"</span>,</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"NO CONSUME"</span>, <span class="st">"OCASIONAL"</span>, <span class="st">"FRECUENTE"</span>, <span class="st">"ALTO"</span>)),</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"NO CONSUME"</span>,</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"OCASIONAL"</span>,</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"FRECUENTE"</span>,</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Vasos Jugo Azucarado</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"ALTO"</span>,</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"NO CONSUME"</span>, <span class="st">"OCASIONAL"</span>, <span class="st">"FRECUENTE"</span>, <span class="st">"ALTO"</span>))</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">Edad =</span> <span class="fu">cut</span>(</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>      Edad,</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">18</span>, <span class="dv">29</span>, <span class="dv">39</span>, <span class="dv">49</span>, <span class="dv">59</span>, <span class="dv">69</span>, <span class="cn">Inf</span>),  <span class="co"># Define los rangos de edad</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"≤18 años"</span>, <span class="st">"19-29 años"</span>, <span class="st">"30-39 años"</span>, <span class="st">"40-49 años"</span>, <span class="st">"50-59 años"</span>, <span class="st">"60-69 años"</span>, <span class="st">"≥70 años"</span>),</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="missing-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Missing Data</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(select_data, <span class="at">sort_miss =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_upset</span>(select_data, <span class="at">nsets =</span> <span class="fu">n_var_miss</span>(select_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="machine-learning-unsupervised" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="machine-learning-unsupervised"><span class="header-section-number">3.1</span> Machine learning Unsupervised</h2>
<p>To explore and uncover dietary patterns in the dataset without predefined labels or outcomes, unsupervised machine learning techniques were employed. Specifically, hierarchical clustering and K-Modes clustering were used to identify potential groupings or clusters within the data. These methods are particularly suitable for datasets with mixed data types, including categorical and continuous variables.</p>
<section id="k-modes-clustering" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="k-modes-clustering"><span class="header-section-number">3.1.1</span> K-Modes Clustering</h3>
<p>For datasets dominated by categorical variables, K-Modes clustering was applied:</p>
<ul>
<li><p>Initialization: The algorithm initialized cluster centroids using the “modes” of the data.</p></li>
<li><p>Optimization: Iterative updates minimized the dissimilarity within clusters using a categorical distance measure.</p></li>
<li><p>Cluster Assignments: Final cluster memberships were assigned to each observation, revealing underlying patterns in the data.</p></li>
</ul>
</section>
<section id="hierarchical-clustering" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="hierarchical-clustering"><span class="header-section-number">3.1.2</span> Hierarchical Clustering</h3>
<p>Hierarchical clustering was performed to create a hierarchical representation of the data in the form of a dendrogram. The following steps were taken:</p>
<ul>
<li><p>Distance Matrix Calculation: A dissimilarity matrix was computed using Gower’s Distance metric for categorical variables indefined(.</p></li>
<li><p>Clustering Algorithm: The Ward’s linkage method was applied to minimize intra-cluster variance. Dendrogram Visualization:</p></li>
<li><p>The dendrogram provided insights into the structure of the data and guided the determination of the optimal number of clusters.</p></li>
</ul>
</section>
<section id="visualization" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="visualization"><span class="header-section-number">3.1.3</span> Visualization</h3>
<p>Dimensionality Reduction for Visualization To facilitate the visualization of high-dimensional data, dimensionality reduction techniques such as Multiple Correspondence Analysis (MCA) were applied: MCA was employed for categorical variables, providing a reduced feature space for cluster representation.</p>
</section>
</section>
<section id="machine-learning-supervised" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="machine-learning-supervised"><span class="header-section-number">3.2</span> Machine Learning Supervised</h2>
<section id="dataset-splitting" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="dataset-splitting"><span class="header-section-number">3.2.1</span> Dataset splitting</h3>
<p>The entire dataset was stratified and divided into two subsets, ensuring that both sets maintained the original proportion of classes in the dependent variable: the training set, comprising 80% of the total data, was employed to train the models. The test set, consisting of 20% of the total data, was reserved for the final evaluation of the models.</p>
</section>
<section id="models" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="models"><span class="header-section-number">3.2.2</span> Models</h3>
<p>Several Machine Learning models were selected to predict the dichotomous dependent variable (presence or absence of metabolic syndrome (MS)) using the following approaches: Logistic regression: Employing a classical approach to binary classification problems. Random forest: A decision-tree-based algorithm that combines multiple trees to enhance accuracy. Support Vector Machines (SVM): A model based on maximizing the classification margin. Decision trees: An algorithm based on recursive partitioning of data (utilizing the partial method). K-Nearest Neighbors (KNN): A distance-based classifier that predicts the class of an observation based on the classes of its nearest neighbors.</p>
<p>For each model, 10-fold cross-validation (CV) was applied to the training set. This procedure divides the data into 10 subsets or “folds,” using each fold once as the test set and the other nine as the training set. Cross-validation ensures that each observation is used for both training and testing, allowing for a robust estimation of model performance. Additionally, a bootstrap method was implemented to evaluate the stability of the models. Bootstrap is a sampling technique with replacement, in which multiple subsets of the data (in this case, 100 samples) are generated to train and evaluate the model in each sample. This allows the calculation of performance metrics that are more robust and less dependent on a single partition of data. Bootstrapping was particularly useful for assessing the variance in model performance and the sensitivity of performance to changes in the data.</p>
</section>
<section id="evaluation-metrics" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="evaluation-metrics"><span class="header-section-number">3.2.3</span> Evaluation Metrics</h3>
<p>To evaluate the performance of each model on the test set (20% set aside), the following metrics were calculated:</p>
<section id="sensitivity" class="level4" data-number="3.2.3.1">
<h4 data-number="3.2.3.1" class="anchored" data-anchor-id="sensitivity"><span class="header-section-number">3.2.3.1</span> Sensitivity</h4>
<p>Sensitivity is the proportion of true positives (correct prediction of MS) among all true positives:</p>
<p><span class="math display">\[
\text{Sensitivity} = \frac{\text{True Positives (TP)}}{\text{True Positives (TP)} + \text{False Negatives (FN)}}
\]</span></p>
</section>
<section id="specificity" class="level4" data-number="3.2.3.2">
<h4 data-number="3.2.3.2" class="anchored" data-anchor-id="specificity"><span class="header-section-number">3.2.3.2</span> Specificity</h4>
<p>Specificity is the proportion of true negatives (correct prediction of MS-free) among all true negatives:</p>
<p><span class="math display">\[
\text{Specificity} = \frac{\text{True Negatives (TN)}}{\text{True Negatives (TN)} + \text{False Positives (FP)}}
\]</span></p>
</section>
<section id="precision" class="level4" data-number="3.2.3.3">
<h4 data-number="3.2.3.3" class="anchored" data-anchor-id="precision"><span class="header-section-number">3.2.3.3</span> Precision</h4>
<p>The Positive Predictive Value (PPV), also known as Precision, is the proportion of correctly predicted positives among all predicted positives:</p>
<p><span class="math display">\[
\text{Precision} = \frac{\text{True Positives (TP)}}{\text{True Positives (TP)} + \text{False Positives (FP)}}
\]</span></p>
</section>
<section id="accuracy" class="level4" data-number="3.2.3.4">
<h4 data-number="3.2.3.4" class="anchored" data-anchor-id="accuracy"><span class="header-section-number">3.2.3.4</span> Accuracy</h4>
<p>Accuracy is the percentage of all correct predictions, i.e., the proportion of cases where the model correctly predicted the class (MS or MS-free):</p>
<p><span class="math display">\[
\text{Accuracy} = \frac{\text{True Positives (TP)} + \text{True Negatives (TN)}}{\text{Total Cases}}
\]</span></p>
</section>
</section>
<section id="model-comparison" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="model-comparison"><span class="header-section-number">3.2.4</span> Model Comparison</h3>
<p>The models were compared based on the aforementioned performance metrics to determine which one demonstrated superior accuracy, sensitivity, and specificity. Furthermore, the performance of each model was compared using the area under the Receiver Operating Characteristic (ROC) curve (AUC) to obtain an overall measure of the discriminatory capacity of the models.</p>
</section>
</section>
</section>
<section id="results" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Results</h1>
<section id="machine-learning-unsupervised-1" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="machine-learning-unsupervised-1"><span class="header-section-number">4.1</span> Machine learning Unsupervised</h2>
<section id="k-modes-clustering-1" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="k-modes-clustering-1"><span class="header-section-number">4.1.1</span> K-Modes clustering</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>select_data2 <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>( <span class="st">"Frecuencia Pescado/Mariscos"</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Lácteos"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tipo de Lácteos"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Cereales Integrales"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frecuencia Legumbres"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Días Frutas/Semana"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Días Verduras/Semana"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Agua/Día"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Bebidas Azucaradas"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vasos Jugo Azucarado"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tipo de Aceite"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Probar diferentes valores de k</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>max_k <span class="ot">&lt;-</span> <span class="dv">10</span>  <span class="co"># Define el número máximo de clústeres a evaluar</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>dissimilarity <span class="ot">&lt;-</span> <span class="fu">numeric</span>(max_k)  <span class="co"># Vector para almacenar la disimilitud total</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>max_k) {</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  kmodes_model <span class="ot">&lt;-</span> <span class="fu">kmodes</span>(select_data2, <span class="at">modes =</span> k)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  dissimilarity[k] <span class="ot">&lt;-</span> kmodes_model<span class="sc">$</span>withindiff  <span class="co"># Suma de disimilitudes dentro de los clústeres</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar los resultados</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span>max_k, dissimilarity, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Número de Clústeres (k)"</span>, <span class="at">ylab =</span> <span class="st">"Disimilitud Total"</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Método del Codo para K-Modes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecer el número de clústeres</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="co"># Cambia el número de clústeres según lo que necesites</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar K-Modes</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">291190</span>)  <span class="co"># Para reproducibilidad</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>kmodes_model <span class="ot">&lt;-</span> klaR<span class="sc">::</span><span class="fu">kmodes</span>(select_data2, <span class="at">modes =</span> k)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>mca_result <span class="ot">&lt;-</span> <span class="fu">MCA</span>(select_data2, <span class="at">graph =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar los clústeres al dataset original</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>select_data2<span class="sc">$</span>Cluster <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(kmodes_model<span class="sc">$</span>cluster)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar los clústeres en el espacio MCA</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_mca_ind</span>(mca_result,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="st">"none"</span>,                <span class="co"># Ocultar etiquetas de individuos</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">habillage =</span> select_data2<span class="sc">$</span>Cluster, <span class="co"># Usar los clústeres como color</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="st">"jco"</span>,               <span class="co"># Paleta de colores</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">addEllipses =</span> <span class="cn">TRUE</span>,            <span class="co"># Agregar elipses alrededor de los clústeres</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">ellipse.type =</span> <span class="st">"confidence"</span>,   <span class="co"># Elipses de confianza</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Visualización de Clústeres en el Espacio MCA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar las contribuciones de las variables</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_mca_var</span>(mca_result,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">repel =</span> <span class="cn">TRUE</span>, <span class="co"># Evitar la superposición de etiquetas</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">labelsize =</span> <span class="dv">3</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Contribuciones de Variables en MCA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="hierarchical-clustering-1" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="hierarchical-clustering-1"><span class="header-section-number">4.1.2</span> Hierarchical clustering</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular distancias entre individuos en el espacio MCA</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>mca_coords <span class="ot">&lt;-</span> mca_result<span class="sc">$</span>ind<span class="sc">$</span>coord  <span class="co"># Coordenadas de los individuos en MCA</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>dist_matrix <span class="ot">&lt;-</span> <span class="fu">dist</span>(mca_coords, <span class="at">method =</span> <span class="st">"euclidean"</span>)  <span class="co"># Distancia Euclidiana</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Clustering jerárquico</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>hclust_model <span class="ot">&lt;-</span> <span class="fu">hclust</span>(dist_matrix, <span class="at">method =</span> <span class="st">"ward.D2"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cortar el dendrograma en k clústeres</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> <span class="fu">cutree</span>(hclust_model, <span class="at">k =</span> <span class="dv">4</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>select_data2<span class="sc">$</span>Cluster <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(clusters)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar los clústeres en el espacio MCA</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_mca_ind</span>(mca_result,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="st">"none"</span>,                <span class="co"># Ocultar etiquetas de individuos</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">habillage =</span> select_data2<span class="sc">$</span>Cluster, <span class="co"># Usar los clústeres como color</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="st">"jco"</span>,               <span class="co"># Paleta de colores</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">addEllipses =</span> <span class="cn">TRUE</span>,            <span class="co"># Agregar elipses alrededor de los clústeres</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">ellipse.type =</span> <span class="st">"confidence"</span>,   <span class="co"># Elipses de confianza</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Visualización de Clústeres en el Espacio MCA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar dendrograma</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(hclust_model, </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#      labels = FALSE, </span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#      main = "Dendrograma de Clustering Jerárquico",</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#      xlab = "", ylab = "Altura")</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # Graficar el dendrograma con colores</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># fviz_dend(hclust_model, k = k, </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#           rect = TRUE,            # Dibujar rectángulos alrededor de los clústeres</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#           rect_fill = TRUE,       # Rellenar los rectángulos con color</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#           rect_border = "jco",    # Colores de borde</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#           main = "Dendrograma con Clústeres")</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular matriz de disimilitud con Gower's distance</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>dissimilarity_matrix <span class="ot">&lt;-</span> <span class="fu">daisy</span>(select_data, <span class="at">metric =</span> <span class="st">"gower"</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>hclust_model <span class="ot">&lt;-</span> <span class="fu">hclust</span>(<span class="fu">as.dist</span>(dissimilarity_matrix), <span class="at">method =</span> <span class="st">"ward.D2"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el dendrograma</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(hclust_model, main = "Dendrograma para Variables Categóricas", </span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#      xlab = "", ylab = "Altura")</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Cortar el dendrograma en k clústeres</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">4</span>  <span class="co"># Define el número de clústeres</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> <span class="fu">cutree</span>(hclust_model, <span class="at">k =</span> k)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>select_data2<span class="sc">$</span>Cluster <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(clusters)</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar los clústeres en el espacio MCA</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_mca_ind</span>(mca_result,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="st">"none"</span>,                <span class="co"># Ocultar etiquetas de individuos</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>             <span class="at">habillage =</span> select_data2<span class="sc">$</span>Cluster, <span class="co"># Usar los clústeres como color</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="st">"jco"</span>,               <span class="co"># Paleta de colores</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">addEllipses =</span> <span class="cn">TRUE</span>,            <span class="co"># Agregar elipses alrededor de los clústeres</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>             <span class="at">ellipse.type =</span> <span class="st">"confidence"</span>,   <span class="co"># Elipses de confianza</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Visualización de Clústeres en el Espacio MCA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="1440"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el dendrograma con factoextra</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># fviz_dend(hclust_model, k = k, rect = TRUE, rect_fill = TRUE, rect_border = "jco",</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#           main = "Dendrograma con Clústeres")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="machine-learning-supervised-1" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="machine-learning-supervised-1"><span class="header-section-number">4.2</span> Machine Learning Supervised</h2>
<section id="cross-validation-with-10-k-fold" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="cross-validation-with-10-k-fold"><span class="header-section-number">4.2.1</span> Cross Validation with 10 K-fold</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiar los nombres de las columnas</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiar los labels de los factores</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> select_data <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), <span class="sc">~</span> <span class="fu">fct_relabel</span>(.x, janitor<span class="sc">::</span>make_clean_names)))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividir los datos en conjunto de entrenamiento y prueba (80% entrenamiento, 20% prueba)</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>train_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(select_data<span class="sc">$</span>sindrome_metabolico, <span class="at">p =</span> <span class="fl">0.8</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> select_data[train_index, ]</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> select_data[<span class="sc">-</span>train_index, ]</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir el control de entrenamiento para validación cruzada</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">10</span>, <span class="at">classProbs =</span> <span class="cn">TRUE</span>, <span class="at">summaryFunction =</span> twoClassSummary, <span class="at">returnResamp =</span> <span class="st">"all"</span> )</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 1: Regresión logística</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>logistic_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">family =</span> <span class="st">"binomial"</span>, </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 2: Random Forest</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"rf"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 3: Support Vector Machine (SVM)</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>svm_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"svmRadial"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 4: Árbol de decisión con rpart</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>tree_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"rpart"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 5: K-Nearest Neighbors (KNN)</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>knn_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"knn"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluación de los modelos en el conjunto de prueba</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>logistic_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(logistic_model, test_data)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>rf_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, test_data)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>svm_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_model, test_data)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>tree_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(tree_model, test_data)</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>knn_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(knn_model, test_data)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular las métricas para cada modelo</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>logistic_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(logistic_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>rf_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(rf_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>svm_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(svm_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>tree_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(tree_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>knn_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(knn_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a><span class="co"># # Mostrar las métricas de evaluación</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a><span class="co"># logistic_cm$byClass  # Sensibilidad, Especificidad, Precisión, etc. para la regresión logística</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_cm$byClass        # Sensibilidad, Especificidad, Precisión, etc. para Random Forest</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a><span class="co"># svm_cm$byClass       # Sensibilidad, Especificidad, Precisión, etc. para SVM</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a><span class="co"># tree_cm$byClass      # Sensibilidad, Especificidad, Precisión, etc. para Árbol de Decisión</span></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a><span class="co"># knn_cm$byClass       # Sensibilidad, Especificidad, Precisión, etc. para KNN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelos en una lista</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Logistic =</span> logistic_model,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Random Forest"</span> <span class="ot">=</span> rf_model,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">SVM =</span> svm_model,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Decision Tree"</span> <span class="ot">=</span> tree_model,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">KNN =</span> knn_model</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para generar predicciones, curvas ROC y AUC</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>get_roc_data <span class="ot">&lt;-</span> <span class="cf">function</span>(model, test_data, <span class="at">label_col =</span> <span class="st">"sindrome_metabolico"</span>) {</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="st">"si"</span>]</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  roc_curve <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_data[[label_col]], prob)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  auc_val <span class="ot">&lt;-</span> <span class="fu">auc</span>(roc_curve)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  ci_val <span class="ot">&lt;-</span> <span class="fu">ci.auc</span>(roc_curve)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">roc =</span> roc_curve, <span class="at">auc =</span> auc_val, <span class="at">ci =</span> ci_val)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar ROC y AUC para todos los modelos</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>roc_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(models, get_roc_data, <span class="at">test_data =</span> test_data)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe con los valores de AUC y su IC</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>auc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">names</span>(roc_results),</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">AUC =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>auc),</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lower =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>ci[<span class="dv">1</span>]),</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">Upper =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>ci[<span class="dv">3</span>])</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear las coordenadas ROC para graficar</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>fpr_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">2000</span>)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>roc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">FPR =</span> <span class="fu">rep</span>(fpr_seq, <span class="at">times =</span> <span class="fu">length</span>(models)),</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">TPR =</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(roc_results, <span class="cf">function</span>(x) <span class="fu">coords</span>(x<span class="sc">$</span>roc, <span class="at">x =</span> fpr_seq, <span class="at">input =</span> <span class="st">"specificity"</span>, <span class="at">ret =</span> <span class="st">"sensitivity"</span>))),</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">rep</span>(<span class="fu">names</span>(models), <span class="at">each =</span> <span class="fu">length</span>(fpr_seq))</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar las curvas ROC</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(roc_data, <span class="fu">aes</span>(<span class="at">x =</span> FPR, <span class="at">y =</span> TPR, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ROC Curves for Models </span><span class="sc">\n</span><span class="st">(K-fold cross validation resampling method)"</span>, <span class="at">x =</span> <span class="st">"1 - Specificity (FPR)"</span>, <span class="at">y =</span> <span class="st">"Sensitivity (TPR)"</span>) <span class="sc">+</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe vacío para almacenar las métricas</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>metrics_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para calcular IC de proporciones</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>calc_ci <span class="ot">&lt;-</span> <span class="cf">function</span>(p, n, <span class="at">z =</span> <span class="fl">1.96</span>) {</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((p <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> p)) <span class="sc">/</span> n)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">lower =</span> p <span class="sc">-</span> z <span class="sc">*</span> se, <span class="at">upper =</span> p <span class="sc">+</span> z <span class="sc">*</span> se)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraer métricas y AUC de cada modelo</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model_name <span class="cf">in</span> <span class="fu">names</span>(models)) {</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Confusion matrix for standard metrics</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(models[[model_name]], test_data), test_data<span class="sc">$</span>sindrome_metabolico,<span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Verificar nombres en cm$byClass para obtener la métrica correcta</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  sensitivity <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Sensitivity"</span>]</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  specificity <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Specificity"</span>]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  precision <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Precision"</span>]  <span class="co"># Precisión es Pos Predictive Value</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  accuracy <span class="ot">&lt;-</span> cm<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>]</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcular las métricas estándar</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  model_metrics <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> model_name,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>, <span class="st">"Precision"</span>, <span class="st">"Accuracy"</span>),</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(sensitivity, specificity, precision, accuracy),</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcular los IC para las métricas estándar</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  model_metrics<span class="sc">$</span>Lower <span class="ot">&lt;-</span> <span class="fu">sapply</span>(model_metrics<span class="sc">$</span>Value, <span class="cf">function</span>(x) <span class="fu">calc_ci</span>(x, <span class="fu">nrow</span>(test_data))[<span class="dv">1</span>])</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  model_metrics<span class="sc">$</span>Upper <span class="ot">&lt;-</span> <span class="fu">sapply</span>(model_metrics<span class="sc">$</span>Value, <span class="cf">function</span>(x) <span class="fu">calc_ci</span>(x, <span class="fu">nrow</span>(test_data))[<span class="dv">2</span>])</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extraer el AUC para el modelo</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  auc_val <span class="ot">&lt;-</span> roc_results[[model_name]]<span class="sc">$</span>auc</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>  auc_ci <span class="ot">&lt;-</span> roc_results[[model_name]]<span class="sc">$</span>ci</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agregar el AUC como una métrica</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>  auc_metric <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> model_name,</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="st">"AUC"</span>,</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> auc_val,</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">Lower =</span> auc_ci[<span class="dv">1</span>],</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">Upper =</span> auc_ci[<span class="dv">3</span>],</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combinar las métricas estándar con el AUC</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>  model_metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model_metrics, auc_metric)</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agregar al dataframe general</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>  metrics_data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(metrics_data, model_metrics)</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Reordenar las métricas en el data frame</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>metrics_data<span class="sc">$</span>Metric <span class="ot">&lt;-</span> <span class="fu">factor</span>(metrics_data<span class="sc">$</span>Metric, </span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>, <span class="st">"Precision"</span>, <span class="st">"Accuracy"</span>, <span class="st">"AUC"</span>))</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar las métricas con el nuevo orden (incluyendo AUC) con IC para cada modelo y valores encima</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(metrics_data, <span class="fu">aes</span>(<span class="at">x =</span> Metric, <span class="at">y =</span> Value, <span class="at">fill =</span> Model)) <span class="sc">+</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.7</span>,<span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Lower, <span class="at">ymax =</span> Upper), <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>,<span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Value, <span class="dv">3</span>), <span class="at">y =</span> Upper <span class="sc">+</span> <span class="fl">0.05</span>, <span class="at">color =</span> Model), </span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), </span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>            <span class="at">angle =</span> <span class="dv">90</span>, </span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="co"># Valores rotados en 90 grados, justo arriba de los intervalos superiores</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Performance Metrics for Models (K-fold cross validation resampling method) </span><span class="sc">\n</span><span class="st">with 95% Confidence Intervals"</span>,</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Metric"</span>,</span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proportion (95% CI)"</span>) <span class="sc">+</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span>  <span class="co"># Asegurando que los colores coincidan</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>logistic_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(logistic_model<span class="sc">$</span>finalModel)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>logistic_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(logistic_summary<span class="sc">$</span>coefficients)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR_Lower <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> logistic_df<span class="sc">$</span><span class="st">`</span><span class="at">Std. Error</span><span class="st">`</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR_Upper <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> logistic_df<span class="sc">$</span><span class="st">`</span><span class="at">Std. Error</span><span class="st">`</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(logistic_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>, <span class="st">"z value"</span>, <span class="st">"Pr(&gt;|z|)"</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Odds Ratio (OR)"</span>, <span class="st">"OR 95% CI Lower"</span>, <span class="st">"OR 95% CI Upper"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>logistic_df <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">"Summary of Logistic Regression Model Coefficients with Odds Ratio and 95% Confidence Interval"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Summary of Logistic Regression Model Coefficients with Odds Ratio and 95% Confidence Interval</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Std. Error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">z value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Pr(&gt;|z|)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Odds Ratio (OR)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR 95% CI Lower</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR 95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-15.106</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">-0.059</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">0.00e+00</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.10e+210</td>
</tr>
<tr class="even">
<td style="text-align: left;">sexomujer</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">-0.193</td>
<td style="text-align: right;">0.847</td>
<td style="text-align: right;">9.82e-01</td>
<td style="text-align: right;">0.820</td>
<td style="text-align: right;">1.18e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx19_29_anos</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">0.267</td>
<td style="text-align: right;">0.100</td>
<td style="text-align: right;">0.920</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.609</td>
<td style="text-align: right;">1.73e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx30_39_anos</td>
<td style="text-align: right;">0.797</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: right;">3.086</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">2.22e+00</td>
<td style="text-align: right;">1.338</td>
<td style="text-align: right;">3.68e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx40_49_anos</td>
<td style="text-align: right;">1.319</td>
<td style="text-align: right;">0.254</td>
<td style="text-align: right;">5.198</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">3.74e+00</td>
<td style="text-align: right;">2.274</td>
<td style="text-align: right;">6.15e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx50_59_anos</td>
<td style="text-align: right;">1.725</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: right;">6.852</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.61e+00</td>
<td style="text-align: right;">3.426</td>
<td style="text-align: right;">9.19e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx60_69_anos</td>
<td style="text-align: right;">2.084</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: right;">8.079</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">8.04e+00</td>
<td style="text-align: right;">4.847</td>
<td style="text-align: right;">1.33e+01</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx70_anos</td>
<td style="text-align: right;">1.742</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">6.645</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.71e+00</td>
<td style="text-align: right;">3.414</td>
<td style="text-align: right;">9.54e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regioni_tarapaca</td>
<td style="text-align: right;">-0.011</td>
<td style="text-align: right;">0.273</td>
<td style="text-align: right;">-0.041</td>
<td style="text-align: right;">0.967</td>
<td style="text-align: right;">9.89e-01</td>
<td style="text-align: right;">0.579</td>
<td style="text-align: right;">1.69e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionii_antofagasta</td>
<td style="text-align: right;">-0.044</td>
<td style="text-align: right;">0.287</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.879</td>
<td style="text-align: right;">9.57e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.68e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regioniii_atacama</td>
<td style="text-align: right;">-0.531</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">-1.964</td>
<td style="text-align: right;">0.050</td>
<td style="text-align: right;">5.88e-01</td>
<td style="text-align: right;">0.346</td>
<td style="text-align: right;">9.99e-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">regioniv_coquimbo</td>
<td style="text-align: right;">-0.028</td>
<td style="text-align: right;">0.261</td>
<td style="text-align: right;">-0.105</td>
<td style="text-align: right;">0.916</td>
<td style="text-align: right;">9.73e-01</td>
<td style="text-align: right;">0.583</td>
<td style="text-align: right;">1.62e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionv_valparaiso</td>
<td style="text-align: right;">-0.402</td>
<td style="text-align: right;">0.226</td>
<td style="text-align: right;">-1.781</td>
<td style="text-align: right;">0.075</td>
<td style="text-align: right;">6.69e-01</td>
<td style="text-align: right;">0.430</td>
<td style="text-align: right;">1.04e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionxiii_metropolitana</td>
<td style="text-align: right;">-0.217</td>
<td style="text-align: right;">0.214</td>
<td style="text-align: right;">-1.016</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: right;">8.05e-01</td>
<td style="text-align: right;">0.529</td>
<td style="text-align: right;">1.22e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionvi_l_bdo_o_higgins</td>
<td style="text-align: right;">-0.186</td>
<td style="text-align: right;">0.257</td>
<td style="text-align: right;">-0.726</td>
<td style="text-align: right;">0.468</td>
<td style="text-align: right;">8.30e-01</td>
<td style="text-align: right;">0.502</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionvii_maule</td>
<td style="text-align: right;">-0.270</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: right;">-1.068</td>
<td style="text-align: right;">0.285</td>
<td style="text-align: right;">7.63e-01</td>
<td style="text-align: right;">0.465</td>
<td style="text-align: right;">1.25e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionviii_biobio</td>
<td style="text-align: right;">-0.199</td>
<td style="text-align: right;">0.222</td>
<td style="text-align: right;">-0.895</td>
<td style="text-align: right;">0.371</td>
<td style="text-align: right;">8.20e-01</td>
<td style="text-align: right;">0.530</td>
<td style="text-align: right;">1.27e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionix_la_araucania</td>
<td style="text-align: right;">-0.240</td>
<td style="text-align: right;">0.265</td>
<td style="text-align: right;">-0.906</td>
<td style="text-align: right;">0.365</td>
<td style="text-align: right;">7.87e-01</td>
<td style="text-align: right;">0.468</td>
<td style="text-align: right;">1.32e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionxiv_los_rios</td>
<td style="text-align: right;">-0.093</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-0.355</td>
<td style="text-align: right;">0.723</td>
<td style="text-align: right;">9.11e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.52e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionx_los_lagos</td>
<td style="text-align: right;">-0.043</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-0.165</td>
<td style="text-align: right;">0.869</td>
<td style="text-align: right;">9.58e-01</td>
<td style="text-align: right;">0.574</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionxi_aysen</td>
<td style="text-align: right;">-0.534</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-2.038</td>
<td style="text-align: right;">0.042</td>
<td style="text-align: right;">5.86e-01</td>
<td style="text-align: right;">0.351</td>
<td style="text-align: right;">9.80e-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionxii_magallanes_y_antartica</td>
<td style="text-align: right;">0.161</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">0.596</td>
<td style="text-align: right;">0.551</td>
<td style="text-align: right;">1.17e+00</td>
<td style="text-align: right;">0.692</td>
<td style="text-align: right;">1.99e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nivel_educacionalx8_12_anos</td>
<td style="text-align: right;">-0.204</td>
<td style="text-align: right;">0.116</td>
<td style="text-align: right;">-1.763</td>
<td style="text-align: right;">0.078</td>
<td style="text-align: right;">8.15e-01</td>
<td style="text-align: right;">0.650</td>
<td style="text-align: right;">1.02e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">nivel_educacionalx13_o_mas_anos</td>
<td style="text-align: right;">-0.474</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">-3.109</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">6.22e-01</td>
<td style="text-align: right;">0.462</td>
<td style="text-align: right;">8.39e-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zonarural</td>
<td style="text-align: right;">0.031</td>
<td style="text-align: right;">0.121</td>
<td style="text-align: right;">0.254</td>
<td style="text-align: right;">0.800</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.813</td>
<td style="text-align: right;">1.31e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_pescado_mariscosx1_vez_a_la_semana</td>
<td style="text-align: right;">0.086</td>
<td style="text-align: right;">0.159</td>
<td style="text-align: right;">0.541</td>
<td style="text-align: right;">0.588</td>
<td style="text-align: right;">1.09e+00</td>
<td style="text-align: right;">0.798</td>
<td style="text-align: right;">1.49e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_pescado_mariscosmenos_de_3_veces_al_mes</td>
<td style="text-align: right;">-0.010</td>
<td style="text-align: right;">0.166</td>
<td style="text-align: right;">-0.062</td>
<td style="text-align: right;">0.951</td>
<td style="text-align: right;">9.90e-01</td>
<td style="text-align: right;">0.714</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_pescado_mariscosmenos_de_1_vez_al_mes_o_nunca</td>
<td style="text-align: right;">0.043</td>
<td style="text-align: right;">0.160</td>
<td style="text-align: right;">0.268</td>
<td style="text-align: right;">0.789</td>
<td style="text-align: right;">1.04e+00</td>
<td style="text-align: right;">0.763</td>
<td style="text-align: right;">1.43e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosmenos_de_tres_veces_al_dia</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">0.094</td>
<td style="text-align: right;">0.925</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">1.62e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosuna_vez_al_dia</td>
<td style="text-align: right;">-0.155</td>
<td style="text-align: right;">0.197</td>
<td style="text-align: right;">-0.786</td>
<td style="text-align: right;">0.432</td>
<td style="text-align: right;">8.57e-01</td>
<td style="text-align: right;">0.582</td>
<td style="text-align: right;">1.26e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosdia_por_medio</td>
<td style="text-align: right;">0.040</td>
<td style="text-align: right;">0.211</td>
<td style="text-align: right;">0.192</td>
<td style="text-align: right;">0.848</td>
<td style="text-align: right;">1.04e+00</td>
<td style="text-align: right;">0.689</td>
<td style="text-align: right;">1.57e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosal_menos_una_vez_por_semana</td>
<td style="text-align: right;">-0.042</td>
<td style="text-align: right;">0.210</td>
<td style="text-align: right;">-0.199</td>
<td style="text-align: right;">0.842</td>
<td style="text-align: right;">9.59e-01</td>
<td style="text-align: right;">0.636</td>
<td style="text-align: right;">1.45e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosal_menos_una_vez_por_mes</td>
<td style="text-align: right;">0.473</td>
<td style="text-align: right;">0.263</td>
<td style="text-align: right;">1.801</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">1.60e+00</td>
<td style="text-align: right;">0.959</td>
<td style="text-align: right;">2.69e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosnunca</td>
<td style="text-align: right;">-0.277</td>
<td style="text-align: right;">0.238</td>
<td style="text-align: right;">-1.167</td>
<td style="text-align: right;">0.243</td>
<td style="text-align: right;">7.58e-01</td>
<td style="text-align: right;">0.475</td>
<td style="text-align: right;">1.21e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_lacteosenteros</td>
<td style="text-align: right;">-0.173</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">-1.799</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">8.41e-01</td>
<td style="text-align: right;">0.696</td>
<td style="text-align: right;">1.02e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesa_diario</td>
<td style="text-align: right;">-0.228</td>
<td style="text-align: right;">0.301</td>
<td style="text-align: right;">-0.757</td>
<td style="text-align: right;">0.449</td>
<td style="text-align: right;">7.96e-01</td>
<td style="text-align: right;">0.442</td>
<td style="text-align: right;">1.44e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_cereales_integralesdia_por_medio</td>
<td style="text-align: right;">-0.468</td>
<td style="text-align: right;">0.322</td>
<td style="text-align: right;">-1.454</td>
<td style="text-align: right;">0.146</td>
<td style="text-align: right;">6.26e-01</td>
<td style="text-align: right;">0.333</td>
<td style="text-align: right;">1.18e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesal_menos_una_vez_por_semana</td>
<td style="text-align: right;">0.094</td>
<td style="text-align: right;">0.308</td>
<td style="text-align: right;">0.306</td>
<td style="text-align: right;">0.760</td>
<td style="text-align: right;">1.10e+00</td>
<td style="text-align: right;">0.601</td>
<td style="text-align: right;">2.01e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_cereales_integralesal_menos_una_vez_por_mes</td>
<td style="text-align: right;">-0.088</td>
<td style="text-align: right;">0.320</td>
<td style="text-align: right;">-0.276</td>
<td style="text-align: right;">0.782</td>
<td style="text-align: right;">9.15e-01</td>
<td style="text-align: right;">0.489</td>
<td style="text-align: right;">1.71e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesnunca</td>
<td style="text-align: right;">-0.091</td>
<td style="text-align: right;">0.287</td>
<td style="text-align: right;">-0.317</td>
<td style="text-align: right;">0.751</td>
<td style="text-align: right;">9.13e-01</td>
<td style="text-align: right;">0.520</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_legumbresal_menos_una_vez_por_semana</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.102</td>
<td style="text-align: right;">0.164</td>
<td style="text-align: right;">0.870</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.832</td>
<td style="text-align: right;">1.24e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_legumbresentre_una_y_tres_veces_al_mes</td>
<td style="text-align: right;">-0.236</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">-1.539</td>
<td style="text-align: right;">0.124</td>
<td style="text-align: right;">7.90e-01</td>
<td style="text-align: right;">0.585</td>
<td style="text-align: right;">1.07e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_legumbresmenos_de_una_vez_al_mes_o_nunca</td>
<td style="text-align: right;">-0.075</td>
<td style="text-align: right;">0.154</td>
<td style="text-align: right;">-0.484</td>
<td style="text-align: right;">0.628</td>
<td style="text-align: right;">9.28e-01</td>
<td style="text-align: right;">0.686</td>
<td style="text-align: right;">1.26e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax1</td>
<td style="text-align: right;">-0.125</td>
<td style="text-align: right;">0.218</td>
<td style="text-align: right;">-0.575</td>
<td style="text-align: right;">0.565</td>
<td style="text-align: right;">8.82e-01</td>
<td style="text-align: right;">0.575</td>
<td style="text-align: right;">1.35e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax2</td>
<td style="text-align: right;">-0.183</td>
<td style="text-align: right;">0.214</td>
<td style="text-align: right;">-0.854</td>
<td style="text-align: right;">0.393</td>
<td style="text-align: right;">8.33e-01</td>
<td style="text-align: right;">0.548</td>
<td style="text-align: right;">1.27e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax3</td>
<td style="text-align: right;">-0.231</td>
<td style="text-align: right;">0.209</td>
<td style="text-align: right;">-1.105</td>
<td style="text-align: right;">0.269</td>
<td style="text-align: right;">7.94e-01</td>
<td style="text-align: right;">0.527</td>
<td style="text-align: right;">1.20e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax4</td>
<td style="text-align: right;">-0.270</td>
<td style="text-align: right;">0.231</td>
<td style="text-align: right;">-1.169</td>
<td style="text-align: right;">0.242</td>
<td style="text-align: right;">7.63e-01</td>
<td style="text-align: right;">0.485</td>
<td style="text-align: right;">1.20e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax5</td>
<td style="text-align: right;">-0.038</td>
<td style="text-align: right;">0.249</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.879</td>
<td style="text-align: right;">9.63e-01</td>
<td style="text-align: right;">0.592</td>
<td style="text-align: right;">1.57e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax6</td>
<td style="text-align: right;">-0.532</td>
<td style="text-align: right;">0.313</td>
<td style="text-align: right;">-1.699</td>
<td style="text-align: right;">0.089</td>
<td style="text-align: right;">5.88e-01</td>
<td style="text-align: right;">0.318</td>
<td style="text-align: right;">1.08e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax7</td>
<td style="text-align: right;">-0.064</td>
<td style="text-align: right;">0.194</td>
<td style="text-align: right;">-0.330</td>
<td style="text-align: right;">0.742</td>
<td style="text-align: right;">9.38e-01</td>
<td style="text-align: right;">0.642</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax1</td>
<td style="text-align: right;">0.030</td>
<td style="text-align: right;">0.371</td>
<td style="text-align: right;">0.081</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.498</td>
<td style="text-align: right;">2.13e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax2</td>
<td style="text-align: right;">0.059</td>
<td style="text-align: right;">0.344</td>
<td style="text-align: right;">0.170</td>
<td style="text-align: right;">0.865</td>
<td style="text-align: right;">1.06e+00</td>
<td style="text-align: right;">0.540</td>
<td style="text-align: right;">2.08e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax3</td>
<td style="text-align: right;">-0.133</td>
<td style="text-align: right;">0.327</td>
<td style="text-align: right;">-0.408</td>
<td style="text-align: right;">0.683</td>
<td style="text-align: right;">8.75e-01</td>
<td style="text-align: right;">0.461</td>
<td style="text-align: right;">1.66e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax4</td>
<td style="text-align: right;">-0.030</td>
<td style="text-align: right;">0.336</td>
<td style="text-align: right;">-0.088</td>
<td style="text-align: right;">0.930</td>
<td style="text-align: right;">9.71e-01</td>
<td style="text-align: right;">0.502</td>
<td style="text-align: right;">1.88e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax5</td>
<td style="text-align: right;">-0.156</td>
<td style="text-align: right;">0.342</td>
<td style="text-align: right;">-0.456</td>
<td style="text-align: right;">0.648</td>
<td style="text-align: right;">8.55e-01</td>
<td style="text-align: right;">0.437</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax6</td>
<td style="text-align: right;">-0.068</td>
<td style="text-align: right;">0.383</td>
<td style="text-align: right;">-0.178</td>
<td style="text-align: right;">0.858</td>
<td style="text-align: right;">9.34e-01</td>
<td style="text-align: right;">0.441</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax7</td>
<td style="text-align: right;">-0.008</td>
<td style="text-align: right;">0.308</td>
<td style="text-align: right;">-0.026</td>
<td style="text-align: right;">0.979</td>
<td style="text-align: right;">9.92e-01</td>
<td style="text-align: right;">0.543</td>
<td style="text-align: right;">1.81e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_ingredientescasi_siempre</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">0.293</td>
<td style="text-align: right;">0.204</td>
<td style="text-align: right;">0.839</td>
<td style="text-align: right;">1.06e+00</td>
<td style="text-align: right;">0.598</td>
<td style="text-align: right;">1.88e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_ingredientesalgunas_veces</td>
<td style="text-align: right;">-0.135</td>
<td style="text-align: right;">0.294</td>
<td style="text-align: right;">-0.459</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">8.74e-01</td>
<td style="text-align: right;">0.492</td>
<td style="text-align: right;">1.55e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_ingredientesrara_vez</td>
<td style="text-align: right;">-0.105</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: right;">-0.345</td>
<td style="text-align: right;">0.730</td>
<td style="text-align: right;">9.01e-01</td>
<td style="text-align: right;">0.497</td>
<td style="text-align: right;">1.63e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_ingredientesnunca</td>
<td style="text-align: right;">-0.070</td>
<td style="text-align: right;">0.273</td>
<td style="text-align: right;">-0.256</td>
<td style="text-align: right;">0.798</td>
<td style="text-align: right;">9.32e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.59e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalcasi_siempre</td>
<td style="text-align: right;">-0.097</td>
<td style="text-align: right;">0.289</td>
<td style="text-align: right;">-0.334</td>
<td style="text-align: right;">0.738</td>
<td style="text-align: right;">9.08e-01</td>
<td style="text-align: right;">0.515</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalalgunas_veces</td>
<td style="text-align: right;">-0.063</td>
<td style="text-align: right;">0.293</td>
<td style="text-align: right;">-0.216</td>
<td style="text-align: right;">0.829</td>
<td style="text-align: right;">9.39e-01</td>
<td style="text-align: right;">0.528</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalrara_vez</td>
<td style="text-align: right;">0.368</td>
<td style="text-align: right;">0.312</td>
<td style="text-align: right;">1.179</td>
<td style="text-align: right;">0.238</td>
<td style="text-align: right;">1.45e+00</td>
<td style="text-align: right;">0.784</td>
<td style="text-align: right;">2.66e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalnunca</td>
<td style="text-align: right;">0.163</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: right;">0.617</td>
<td style="text-align: right;">0.537</td>
<td style="text-align: right;">1.18e+00</td>
<td style="text-align: right;">0.701</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_selloscasi_siempre</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.227</td>
<td style="text-align: right;">-0.080</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">9.82e-01</td>
<td style="text-align: right;">0.629</td>
<td style="text-align: right;">1.53e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_sellosalgunas_veces</td>
<td style="text-align: right;">0.251</td>
<td style="text-align: right;">0.233</td>
<td style="text-align: right;">1.079</td>
<td style="text-align: right;">0.281</td>
<td style="text-align: right;">1.28e+00</td>
<td style="text-align: right;">0.815</td>
<td style="text-align: right;">2.03e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_sellosrara_vez</td>
<td style="text-align: right;">-0.457</td>
<td style="text-align: right;">0.275</td>
<td style="text-align: right;">-1.663</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">6.33e-01</td>
<td style="text-align: right;">0.369</td>
<td style="text-align: right;">1.08e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_sellosnunca</td>
<td style="text-align: right;">-0.318</td>
<td style="text-align: right;">0.189</td>
<td style="text-align: right;">-1.683</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">7.28e-01</td>
<td style="text-align: right;">0.503</td>
<td style="text-align: right;">1.05e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablescasi_siempre</td>
<td style="text-align: right;">0.211</td>
<td style="text-align: right;">0.250</td>
<td style="text-align: right;">0.841</td>
<td style="text-align: right;">0.401</td>
<td style="text-align: right;">1.23e+00</td>
<td style="text-align: right;">0.756</td>
<td style="text-align: right;">2.02e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesalgunas_veces</td>
<td style="text-align: right;">0.045</td>
<td style="text-align: right;">0.250</td>
<td style="text-align: right;">0.181</td>
<td style="text-align: right;">0.856</td>
<td style="text-align: right;">1.05e+00</td>
<td style="text-align: right;">0.641</td>
<td style="text-align: right;">1.71e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesrara_vez</td>
<td style="text-align: right;">0.430</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">1.592</td>
<td style="text-align: right;">0.111</td>
<td style="text-align: right;">1.54e+00</td>
<td style="text-align: right;">0.905</td>
<td style="text-align: right;">2.61e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesnunca</td>
<td style="text-align: right;">0.261</td>
<td style="text-align: right;">0.217</td>
<td style="text-align: right;">1.202</td>
<td style="text-align: right;">0.230</td>
<td style="text-align: right;">1.30e+00</td>
<td style="text-align: right;">0.848</td>
<td style="text-align: right;">1.99e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_agua_diabajo</td>
<td style="text-align: right;">-0.244</td>
<td style="text-align: right;">0.132</td>
<td style="text-align: right;">-1.849</td>
<td style="text-align: right;">0.064</td>
<td style="text-align: right;">7.84e-01</td>
<td style="text-align: right;">0.605</td>
<td style="text-align: right;">1.01e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_agua_diaadecuado</td>
<td style="text-align: right;">-0.111</td>
<td style="text-align: right;">0.103</td>
<td style="text-align: right;">-1.079</td>
<td style="text-align: right;">0.281</td>
<td style="text-align: right;">8.95e-01</td>
<td style="text-align: right;">0.732</td>
<td style="text-align: right;">1.09e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_bebidas_azucaradasocasional</td>
<td style="text-align: right;">0.110</td>
<td style="text-align: right;">0.098</td>
<td style="text-align: right;">1.116</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: right;">1.12e+00</td>
<td style="text-align: right;">0.920</td>
<td style="text-align: right;">1.35e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_bebidas_azucaradasfrecuente</td>
<td style="text-align: right;">-0.006</td>
<td style="text-align: right;">0.159</td>
<td style="text-align: right;">-0.040</td>
<td style="text-align: right;">0.968</td>
<td style="text-align: right;">9.94e-01</td>
<td style="text-align: right;">0.728</td>
<td style="text-align: right;">1.36e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_bebidas_azucaradasalto</td>
<td style="text-align: right;">0.221</td>
<td style="text-align: right;">0.235</td>
<td style="text-align: right;">0.941</td>
<td style="text-align: right;">0.347</td>
<td style="text-align: right;">1.25e+00</td>
<td style="text-align: right;">0.787</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_jugo_azucaradoocasional</td>
<td style="text-align: right;">-0.135</td>
<td style="text-align: right;">0.100</td>
<td style="text-align: right;">-1.353</td>
<td style="text-align: right;">0.176</td>
<td style="text-align: right;">8.74e-01</td>
<td style="text-align: right;">0.719</td>
<td style="text-align: right;">1.06e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_jugo_azucaradofrecuente</td>
<td style="text-align: right;">0.187</td>
<td style="text-align: right;">0.166</td>
<td style="text-align: right;">1.128</td>
<td style="text-align: right;">0.259</td>
<td style="text-align: right;">1.21e+00</td>
<td style="text-align: right;">0.871</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_jugo_azucaradoalto</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: right;">0.268</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">0.341</td>
<td style="text-align: right;">1.29e+00</td>
<td style="text-align: right;">0.763</td>
<td style="text-align: right;">2.18e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceiteaceite_vegetal_maravilla_maiz_pepa_de_uva</td>
<td style="text-align: right;">14.425</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">0.955</td>
<td style="text-align: right;">1.84e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">7.32e+222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceiteaceite_de_oliva</td>
<td style="text-align: right;">14.149</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.956</td>
<td style="text-align: right;">1.40e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.55e+222</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceitemanteca</td>
<td style="text-align: right;">15.382</td>
<td style="text-align: right;">254.462</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">0.952</td>
<td style="text-align: right;">4.79e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.92e+223</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceitemantequilla</td>
<td style="text-align: right;">14.257</td>
<td style="text-align: right;">254.460</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.955</td>
<td style="text-align: right;">1.55e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">6.20e+222</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceitemargarina</td>
<td style="text-align: right;">14.683</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">0.954</td>
<td style="text-align: right;">2.38e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">9.48e+222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceiteotro_especifique</td>
<td style="text-align: right;">0.020</td>
<td style="text-align: right;">498.118</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">Inf</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</section>
<section id="bootstrap" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="bootstrap"><span class="header-section-number">4.2.2</span> Bootstrap</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir el control de entrenamiento para validación cruzada</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"boot"</span>, <span class="at">number =</span> <span class="dv">100</span>, <span class="at">classProbs =</span> <span class="cn">TRUE</span>, <span class="at">summaryFunction =</span> twoClassSummary)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 1: Regresión logística</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>logistic_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">family =</span> <span class="st">"binomial"</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 2: Random Forest</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"rf"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 3: Support Vector Machine (SVM)</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>svm_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"svmRadial"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>line search fails -1.72 -0.0197 1.01e-05 -4.21e-06 -4.82e-08 3.84e-09 -5.05e-13</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 4: Árbol de decisión con rpart</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>tree_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"rpart"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 5: K-Nearest Neighbors (KNN)</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>knn_model <span class="ot">&lt;-</span> <span class="fu">train</span>(sindrome_metabolico <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"knn"</span>, <span class="at">trControl =</span> control, <span class="at">metric =</span> <span class="st">"ROC"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluación de los modelos en el conjunto de prueba</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>logistic_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(logistic_model, test_data)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>rf_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, test_data)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>svm_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(svm_model, test_data)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>tree_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(tree_model, test_data)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>knn_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(knn_model, test_data)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular las métricas para cada modelo</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>logistic_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(logistic_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>rf_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(rf_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>svm_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(svm_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>tree_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(tree_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>knn_cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(knn_pred, test_data<span class="sc">$</span>sindrome_metabolico, <span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># # Mostrar las métricas de evaluación</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co"># logistic_cm$byClass  # Sensibilidad, Especificidad, Precisión, etc. para la regresión logística</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_cm$byClass        # Sensibilidad, Especificidad, Precisión, etc. para Random Forest</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co"># svm_cm$byClass       # Sensibilidad, Especificidad, Precisión, etc. para SVM</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co"># tree_cm$byClass      # Sensibilidad, Especificidad, Precisión, etc. para Árbol de Decisión</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># knn_cm$byClass       # Sensibilidad, Especificidad, Precisión, etc. para KNN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelos en una lista</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Logistic =</span> logistic_model,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Random Forest"</span> <span class="ot">=</span> rf_model,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">SVM =</span> svm_model,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Decision Tree"</span> <span class="ot">=</span> tree_model,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">KNN =</span> knn_model</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para generar predicciones, curvas ROC y AUC</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>get_roc_data <span class="ot">&lt;-</span> <span class="cf">function</span>(model, test_data, <span class="at">label_col =</span> <span class="st">"sindrome_metabolico"</span>) {</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="st">"si"</span>]</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  roc_curve <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_data[[label_col]], prob)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  auc_val <span class="ot">&lt;-</span> <span class="fu">auc</span>(roc_curve)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  ci_val <span class="ot">&lt;-</span> <span class="fu">ci.auc</span>(roc_curve)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">roc =</span> roc_curve, <span class="at">auc =</span> auc_val, <span class="at">ci =</span> ci_val)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar ROC y AUC para todos los modelos</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>roc_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(models, get_roc_data, <span class="at">test_data =</span> test_data)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe con los valores de AUC y su IC</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>auc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">names</span>(roc_results),</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">AUC =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>auc),</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">Lower =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>ci[<span class="dv">1</span>]),</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">Upper =</span> <span class="fu">sapply</span>(roc_results, <span class="cf">function</span>(x) x<span class="sc">$</span>ci[<span class="dv">3</span>])</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear las coordenadas ROC para graficar</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>fpr_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">2000</span>)</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>roc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">FPR =</span> <span class="fu">rep</span>(fpr_seq, <span class="at">times =</span> <span class="fu">length</span>(models)),</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">TPR =</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(roc_results, <span class="cf">function</span>(x) <span class="fu">coords</span>(x<span class="sc">$</span>roc, <span class="at">x =</span> fpr_seq, <span class="at">input =</span> <span class="st">"specificity"</span>, <span class="at">ret =</span> <span class="st">"sensitivity"</span>))),</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">rep</span>(<span class="fu">names</span>(models), <span class="at">each =</span> <span class="fu">length</span>(fpr_seq))</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar las curvas ROC</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(roc_data, <span class="fu">aes</span>(<span class="at">x =</span> FPR, <span class="at">y =</span> TPR, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ROC Curves for Models </span><span class="sc">\n</span><span class="st">(K-fold cross validation resampling method)"</span>, <span class="at">x =</span> <span class="st">"1 - Specificity (FPR)"</span>, <span class="at">y =</span> <span class="st">"Sensitivity (TPR)"</span>) <span class="sc">+</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe vacío para almacenar las métricas</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>metrics_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para calcular IC de proporciones</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>calc_ci <span class="ot">&lt;-</span> <span class="cf">function</span>(p, n, <span class="at">z =</span> <span class="fl">1.96</span>) {</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((p <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> p)) <span class="sc">/</span> n)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">lower =</span> p <span class="sc">-</span> z <span class="sc">*</span> se, <span class="at">upper =</span> p <span class="sc">+</span> z <span class="sc">*</span> se)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraer métricas y AUC de cada modelo</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model_name <span class="cf">in</span> <span class="fu">names</span>(models)) {</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Confusion matrix for standard metrics</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(models[[model_name]], test_data), test_data<span class="sc">$</span>sindrome_metabolico,<span class="at">positive =</span> <span class="st">"si"</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Verificar nombres en cm$byClass para obtener la métrica correcta</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  sensitivity <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Sensitivity"</span>]</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  specificity <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Specificity"</span>]</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  precision <span class="ot">&lt;-</span> cm<span class="sc">$</span>byClass[<span class="st">"Precision"</span>]  <span class="co"># Precisión es Pos Predictive Value</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  accuracy <span class="ot">&lt;-</span> cm<span class="sc">$</span>overall[<span class="st">"Accuracy"</span>]</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcular las métricas estándar</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  model_metrics <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> model_name,</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>, <span class="st">"Precision"</span>, <span class="st">"Accuracy"</span>),</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(sensitivity, specificity, precision, accuracy),</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcular los IC para las métricas estándar</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  model_metrics<span class="sc">$</span>Lower <span class="ot">&lt;-</span> <span class="fu">sapply</span>(model_metrics<span class="sc">$</span>Value, <span class="cf">function</span>(x) <span class="fu">calc_ci</span>(x, <span class="fu">nrow</span>(test_data))[<span class="dv">1</span>])</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>  model_metrics<span class="sc">$</span>Upper <span class="ot">&lt;-</span> <span class="fu">sapply</span>(model_metrics<span class="sc">$</span>Value, <span class="cf">function</span>(x) <span class="fu">calc_ci</span>(x, <span class="fu">nrow</span>(test_data))[<span class="dv">2</span>])</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extraer el AUC para el modelo</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  auc_val <span class="ot">&lt;-</span> roc_results[[model_name]]<span class="sc">$</span>auc</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  auc_ci <span class="ot">&lt;-</span> roc_results[[model_name]]<span class="sc">$</span>ci</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agregar el AUC como una métrica</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>  auc_metric <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> model_name,</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="st">"AUC"</span>,</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> auc_val,</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">Lower =</span> auc_ci[<span class="dv">1</span>],</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">Upper =</span> auc_ci[<span class="dv">3</span>],</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combinar las métricas estándar con el AUC</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>  model_metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model_metrics, auc_metric)</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agregar al dataframe general</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  metrics_data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(metrics_data, model_metrics)</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Reordenar las métricas en el data frame</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>metrics_data<span class="sc">$</span>Metric <span class="ot">&lt;-</span> <span class="fu">factor</span>(metrics_data<span class="sc">$</span>Metric, </span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>, <span class="st">"Precision"</span>, <span class="st">"Accuracy"</span>, <span class="st">"AUC"</span>))</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar las métricas con el nuevo orden (incluyendo AUC) con IC para cada modelo y valores encima</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(metrics_data, <span class="fu">aes</span>(<span class="at">x =</span> Metric, <span class="at">y =</span> Value, <span class="at">fill =</span> Model)) <span class="sc">+</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.7</span>,<span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Lower, <span class="at">ymax =</span> Upper), <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"black"</span>,<span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Value, <span class="dv">3</span>), <span class="at">y =</span> Upper <span class="sc">+</span> <span class="fl">0.05</span>, <span class="at">color =</span> Model), </span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), </span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>            <span class="at">angle =</span> <span class="dv">90</span>, </span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="co"># Valores rotados en 90 grados, justo arriba de los intervalos superiores</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Performance Metrics for Models (K-fold cross validation resampling method) </span><span class="sc">\n</span><span class="st">with 95% Confidence Intervals"</span>,</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Metric"</span>,</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proportion (95% CI)"</span>) <span class="sc">+</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span>  <span class="co"># Asegurando que los colores coincidan</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>logistic_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(logistic_model<span class="sc">$</span>finalModel)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>logistic_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(logistic_summary<span class="sc">$</span>coefficients)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR_Lower <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> logistic_df<span class="sc">$</span><span class="st">`</span><span class="at">Std. Error</span><span class="st">`</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>logistic_df<span class="sc">$</span>OR_Upper <span class="ot">&lt;-</span> <span class="fu">exp</span>(logistic_df<span class="sc">$</span>Estimate <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> logistic_df<span class="sc">$</span><span class="st">`</span><span class="at">Std. Error</span><span class="st">`</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(logistic_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>, <span class="st">"z value"</span>, <span class="st">"Pr(&gt;|z|)"</span>, </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Odds Ratio (OR)"</span>, <span class="st">"OR 95% CI Lower"</span>, <span class="st">"OR 95% CI Upper"</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>logistic_df <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">"Summary of Logistic Regression Model Coefficients with Odds Ratio and 95% Confidence Interval"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Summary of Logistic Regression Model Coefficients with Odds Ratio and 95% Confidence Interval</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Std. Error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">z value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Pr(&gt;|z|)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Odds Ratio (OR)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR 95% CI Lower</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR 95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-15.106</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">-0.059</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">0.00e+00</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.10e+210</td>
</tr>
<tr class="even">
<td style="text-align: left;">sexomujer</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">-0.193</td>
<td style="text-align: right;">0.847</td>
<td style="text-align: right;">9.82e-01</td>
<td style="text-align: right;">0.820</td>
<td style="text-align: right;">1.18e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx19_29_anos</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">0.267</td>
<td style="text-align: right;">0.100</td>
<td style="text-align: right;">0.920</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.609</td>
<td style="text-align: right;">1.73e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx30_39_anos</td>
<td style="text-align: right;">0.797</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: right;">3.086</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">2.22e+00</td>
<td style="text-align: right;">1.338</td>
<td style="text-align: right;">3.68e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx40_49_anos</td>
<td style="text-align: right;">1.319</td>
<td style="text-align: right;">0.254</td>
<td style="text-align: right;">5.198</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">3.74e+00</td>
<td style="text-align: right;">2.274</td>
<td style="text-align: right;">6.15e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx50_59_anos</td>
<td style="text-align: right;">1.725</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: right;">6.852</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.61e+00</td>
<td style="text-align: right;">3.426</td>
<td style="text-align: right;">9.19e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edadx60_69_anos</td>
<td style="text-align: right;">2.084</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: right;">8.079</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">8.04e+00</td>
<td style="text-align: right;">4.847</td>
<td style="text-align: right;">1.33e+01</td>
</tr>
<tr class="even">
<td style="text-align: left;">edadx70_anos</td>
<td style="text-align: right;">1.742</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">6.645</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.71e+00</td>
<td style="text-align: right;">3.414</td>
<td style="text-align: right;">9.54e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regioni_tarapaca</td>
<td style="text-align: right;">-0.011</td>
<td style="text-align: right;">0.273</td>
<td style="text-align: right;">-0.041</td>
<td style="text-align: right;">0.967</td>
<td style="text-align: right;">9.89e-01</td>
<td style="text-align: right;">0.579</td>
<td style="text-align: right;">1.69e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionii_antofagasta</td>
<td style="text-align: right;">-0.044</td>
<td style="text-align: right;">0.287</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.879</td>
<td style="text-align: right;">9.57e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.68e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regioniii_atacama</td>
<td style="text-align: right;">-0.531</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">-1.964</td>
<td style="text-align: right;">0.050</td>
<td style="text-align: right;">5.88e-01</td>
<td style="text-align: right;">0.346</td>
<td style="text-align: right;">9.99e-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">regioniv_coquimbo</td>
<td style="text-align: right;">-0.028</td>
<td style="text-align: right;">0.261</td>
<td style="text-align: right;">-0.105</td>
<td style="text-align: right;">0.916</td>
<td style="text-align: right;">9.73e-01</td>
<td style="text-align: right;">0.583</td>
<td style="text-align: right;">1.62e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionv_valparaiso</td>
<td style="text-align: right;">-0.402</td>
<td style="text-align: right;">0.226</td>
<td style="text-align: right;">-1.781</td>
<td style="text-align: right;">0.075</td>
<td style="text-align: right;">6.69e-01</td>
<td style="text-align: right;">0.430</td>
<td style="text-align: right;">1.04e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionxiii_metropolitana</td>
<td style="text-align: right;">-0.217</td>
<td style="text-align: right;">0.214</td>
<td style="text-align: right;">-1.016</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: right;">8.05e-01</td>
<td style="text-align: right;">0.529</td>
<td style="text-align: right;">1.22e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionvi_l_bdo_o_higgins</td>
<td style="text-align: right;">-0.186</td>
<td style="text-align: right;">0.257</td>
<td style="text-align: right;">-0.726</td>
<td style="text-align: right;">0.468</td>
<td style="text-align: right;">8.30e-01</td>
<td style="text-align: right;">0.502</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionvii_maule</td>
<td style="text-align: right;">-0.270</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: right;">-1.068</td>
<td style="text-align: right;">0.285</td>
<td style="text-align: right;">7.63e-01</td>
<td style="text-align: right;">0.465</td>
<td style="text-align: right;">1.25e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionviii_biobio</td>
<td style="text-align: right;">-0.199</td>
<td style="text-align: right;">0.222</td>
<td style="text-align: right;">-0.895</td>
<td style="text-align: right;">0.371</td>
<td style="text-align: right;">8.20e-01</td>
<td style="text-align: right;">0.530</td>
<td style="text-align: right;">1.27e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionix_la_araucania</td>
<td style="text-align: right;">-0.240</td>
<td style="text-align: right;">0.265</td>
<td style="text-align: right;">-0.906</td>
<td style="text-align: right;">0.365</td>
<td style="text-align: right;">7.87e-01</td>
<td style="text-align: right;">0.468</td>
<td style="text-align: right;">1.32e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionxiv_los_rios</td>
<td style="text-align: right;">-0.093</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-0.355</td>
<td style="text-align: right;">0.723</td>
<td style="text-align: right;">9.11e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.52e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionx_los_lagos</td>
<td style="text-align: right;">-0.043</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-0.165</td>
<td style="text-align: right;">0.869</td>
<td style="text-align: right;">9.58e-01</td>
<td style="text-align: right;">0.574</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">regionxi_aysen</td>
<td style="text-align: right;">-0.534</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: right;">-2.038</td>
<td style="text-align: right;">0.042</td>
<td style="text-align: right;">5.86e-01</td>
<td style="text-align: right;">0.351</td>
<td style="text-align: right;">9.80e-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">regionxii_magallanes_y_antartica</td>
<td style="text-align: right;">0.161</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">0.596</td>
<td style="text-align: right;">0.551</td>
<td style="text-align: right;">1.17e+00</td>
<td style="text-align: right;">0.692</td>
<td style="text-align: right;">1.99e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nivel_educacionalx8_12_anos</td>
<td style="text-align: right;">-0.204</td>
<td style="text-align: right;">0.116</td>
<td style="text-align: right;">-1.763</td>
<td style="text-align: right;">0.078</td>
<td style="text-align: right;">8.15e-01</td>
<td style="text-align: right;">0.650</td>
<td style="text-align: right;">1.02e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">nivel_educacionalx13_o_mas_anos</td>
<td style="text-align: right;">-0.474</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">-3.109</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">6.22e-01</td>
<td style="text-align: right;">0.462</td>
<td style="text-align: right;">8.39e-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zonarural</td>
<td style="text-align: right;">0.031</td>
<td style="text-align: right;">0.121</td>
<td style="text-align: right;">0.254</td>
<td style="text-align: right;">0.800</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.813</td>
<td style="text-align: right;">1.31e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_pescado_mariscosx1_vez_a_la_semana</td>
<td style="text-align: right;">0.086</td>
<td style="text-align: right;">0.159</td>
<td style="text-align: right;">0.541</td>
<td style="text-align: right;">0.588</td>
<td style="text-align: right;">1.09e+00</td>
<td style="text-align: right;">0.798</td>
<td style="text-align: right;">1.49e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_pescado_mariscosmenos_de_3_veces_al_mes</td>
<td style="text-align: right;">-0.010</td>
<td style="text-align: right;">0.166</td>
<td style="text-align: right;">-0.062</td>
<td style="text-align: right;">0.951</td>
<td style="text-align: right;">9.90e-01</td>
<td style="text-align: right;">0.714</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_pescado_mariscosmenos_de_1_vez_al_mes_o_nunca</td>
<td style="text-align: right;">0.043</td>
<td style="text-align: right;">0.160</td>
<td style="text-align: right;">0.268</td>
<td style="text-align: right;">0.789</td>
<td style="text-align: right;">1.04e+00</td>
<td style="text-align: right;">0.763</td>
<td style="text-align: right;">1.43e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosmenos_de_tres_veces_al_dia</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">0.094</td>
<td style="text-align: right;">0.925</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">1.62e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosuna_vez_al_dia</td>
<td style="text-align: right;">-0.155</td>
<td style="text-align: right;">0.197</td>
<td style="text-align: right;">-0.786</td>
<td style="text-align: right;">0.432</td>
<td style="text-align: right;">8.57e-01</td>
<td style="text-align: right;">0.582</td>
<td style="text-align: right;">1.26e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosdia_por_medio</td>
<td style="text-align: right;">0.040</td>
<td style="text-align: right;">0.211</td>
<td style="text-align: right;">0.192</td>
<td style="text-align: right;">0.848</td>
<td style="text-align: right;">1.04e+00</td>
<td style="text-align: right;">0.689</td>
<td style="text-align: right;">1.57e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosal_menos_una_vez_por_semana</td>
<td style="text-align: right;">-0.042</td>
<td style="text-align: right;">0.210</td>
<td style="text-align: right;">-0.199</td>
<td style="text-align: right;">0.842</td>
<td style="text-align: right;">9.59e-01</td>
<td style="text-align: right;">0.636</td>
<td style="text-align: right;">1.45e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_lacteosal_menos_una_vez_por_mes</td>
<td style="text-align: right;">0.473</td>
<td style="text-align: right;">0.263</td>
<td style="text-align: right;">1.801</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">1.60e+00</td>
<td style="text-align: right;">0.959</td>
<td style="text-align: right;">2.69e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_lacteosnunca</td>
<td style="text-align: right;">-0.277</td>
<td style="text-align: right;">0.238</td>
<td style="text-align: right;">-1.167</td>
<td style="text-align: right;">0.243</td>
<td style="text-align: right;">7.58e-01</td>
<td style="text-align: right;">0.475</td>
<td style="text-align: right;">1.21e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_lacteosenteros</td>
<td style="text-align: right;">-0.173</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">-1.799</td>
<td style="text-align: right;">0.072</td>
<td style="text-align: right;">8.41e-01</td>
<td style="text-align: right;">0.696</td>
<td style="text-align: right;">1.02e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesa_diario</td>
<td style="text-align: right;">-0.228</td>
<td style="text-align: right;">0.301</td>
<td style="text-align: right;">-0.757</td>
<td style="text-align: right;">0.449</td>
<td style="text-align: right;">7.96e-01</td>
<td style="text-align: right;">0.442</td>
<td style="text-align: right;">1.44e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_cereales_integralesdia_por_medio</td>
<td style="text-align: right;">-0.468</td>
<td style="text-align: right;">0.322</td>
<td style="text-align: right;">-1.454</td>
<td style="text-align: right;">0.146</td>
<td style="text-align: right;">6.26e-01</td>
<td style="text-align: right;">0.333</td>
<td style="text-align: right;">1.18e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesal_menos_una_vez_por_semana</td>
<td style="text-align: right;">0.094</td>
<td style="text-align: right;">0.308</td>
<td style="text-align: right;">0.306</td>
<td style="text-align: right;">0.760</td>
<td style="text-align: right;">1.10e+00</td>
<td style="text-align: right;">0.601</td>
<td style="text-align: right;">2.01e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_cereales_integralesal_menos_una_vez_por_mes</td>
<td style="text-align: right;">-0.088</td>
<td style="text-align: right;">0.320</td>
<td style="text-align: right;">-0.276</td>
<td style="text-align: right;">0.782</td>
<td style="text-align: right;">9.15e-01</td>
<td style="text-align: right;">0.489</td>
<td style="text-align: right;">1.71e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_cereales_integralesnunca</td>
<td style="text-align: right;">-0.091</td>
<td style="text-align: right;">0.287</td>
<td style="text-align: right;">-0.317</td>
<td style="text-align: right;">0.751</td>
<td style="text-align: right;">9.13e-01</td>
<td style="text-align: right;">0.520</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_legumbresal_menos_una_vez_por_semana</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.102</td>
<td style="text-align: right;">0.164</td>
<td style="text-align: right;">0.870</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.832</td>
<td style="text-align: right;">1.24e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_legumbresentre_una_y_tres_veces_al_mes</td>
<td style="text-align: right;">-0.236</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">-1.539</td>
<td style="text-align: right;">0.124</td>
<td style="text-align: right;">7.90e-01</td>
<td style="text-align: right;">0.585</td>
<td style="text-align: right;">1.07e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_legumbresmenos_de_una_vez_al_mes_o_nunca</td>
<td style="text-align: right;">-0.075</td>
<td style="text-align: right;">0.154</td>
<td style="text-align: right;">-0.484</td>
<td style="text-align: right;">0.628</td>
<td style="text-align: right;">9.28e-01</td>
<td style="text-align: right;">0.686</td>
<td style="text-align: right;">1.26e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax1</td>
<td style="text-align: right;">-0.125</td>
<td style="text-align: right;">0.218</td>
<td style="text-align: right;">-0.575</td>
<td style="text-align: right;">0.565</td>
<td style="text-align: right;">8.82e-01</td>
<td style="text-align: right;">0.575</td>
<td style="text-align: right;">1.35e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax2</td>
<td style="text-align: right;">-0.183</td>
<td style="text-align: right;">0.214</td>
<td style="text-align: right;">-0.854</td>
<td style="text-align: right;">0.393</td>
<td style="text-align: right;">8.33e-01</td>
<td style="text-align: right;">0.548</td>
<td style="text-align: right;">1.27e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax3</td>
<td style="text-align: right;">-0.231</td>
<td style="text-align: right;">0.209</td>
<td style="text-align: right;">-1.105</td>
<td style="text-align: right;">0.269</td>
<td style="text-align: right;">7.94e-01</td>
<td style="text-align: right;">0.527</td>
<td style="text-align: right;">1.20e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax4</td>
<td style="text-align: right;">-0.270</td>
<td style="text-align: right;">0.231</td>
<td style="text-align: right;">-1.169</td>
<td style="text-align: right;">0.242</td>
<td style="text-align: right;">7.63e-01</td>
<td style="text-align: right;">0.485</td>
<td style="text-align: right;">1.20e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax5</td>
<td style="text-align: right;">-0.038</td>
<td style="text-align: right;">0.249</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.879</td>
<td style="text-align: right;">9.63e-01</td>
<td style="text-align: right;">0.592</td>
<td style="text-align: right;">1.57e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_frutas_semanax6</td>
<td style="text-align: right;">-0.532</td>
<td style="text-align: right;">0.313</td>
<td style="text-align: right;">-1.699</td>
<td style="text-align: right;">0.089</td>
<td style="text-align: right;">5.88e-01</td>
<td style="text-align: right;">0.318</td>
<td style="text-align: right;">1.08e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_frutas_semanax7</td>
<td style="text-align: right;">-0.064</td>
<td style="text-align: right;">0.194</td>
<td style="text-align: right;">-0.330</td>
<td style="text-align: right;">0.742</td>
<td style="text-align: right;">9.38e-01</td>
<td style="text-align: right;">0.642</td>
<td style="text-align: right;">1.37e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax1</td>
<td style="text-align: right;">0.030</td>
<td style="text-align: right;">0.371</td>
<td style="text-align: right;">0.081</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">1.03e+00</td>
<td style="text-align: right;">0.498</td>
<td style="text-align: right;">2.13e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax2</td>
<td style="text-align: right;">0.059</td>
<td style="text-align: right;">0.344</td>
<td style="text-align: right;">0.170</td>
<td style="text-align: right;">0.865</td>
<td style="text-align: right;">1.06e+00</td>
<td style="text-align: right;">0.540</td>
<td style="text-align: right;">2.08e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax3</td>
<td style="text-align: right;">-0.133</td>
<td style="text-align: right;">0.327</td>
<td style="text-align: right;">-0.408</td>
<td style="text-align: right;">0.683</td>
<td style="text-align: right;">8.75e-01</td>
<td style="text-align: right;">0.461</td>
<td style="text-align: right;">1.66e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax4</td>
<td style="text-align: right;">-0.030</td>
<td style="text-align: right;">0.336</td>
<td style="text-align: right;">-0.088</td>
<td style="text-align: right;">0.930</td>
<td style="text-align: right;">9.71e-01</td>
<td style="text-align: right;">0.502</td>
<td style="text-align: right;">1.88e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax5</td>
<td style="text-align: right;">-0.156</td>
<td style="text-align: right;">0.342</td>
<td style="text-align: right;">-0.456</td>
<td style="text-align: right;">0.648</td>
<td style="text-align: right;">8.55e-01</td>
<td style="text-align: right;">0.437</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">dias_verduras_semanax6</td>
<td style="text-align: right;">-0.068</td>
<td style="text-align: right;">0.383</td>
<td style="text-align: right;">-0.178</td>
<td style="text-align: right;">0.858</td>
<td style="text-align: right;">9.34e-01</td>
<td style="text-align: right;">0.441</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dias_verduras_semanax7</td>
<td style="text-align: right;">-0.008</td>
<td style="text-align: right;">0.308</td>
<td style="text-align: right;">-0.026</td>
<td style="text-align: right;">0.979</td>
<td style="text-align: right;">9.92e-01</td>
<td style="text-align: right;">0.543</td>
<td style="text-align: right;">1.81e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_ingredientescasi_siempre</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">0.293</td>
<td style="text-align: right;">0.204</td>
<td style="text-align: right;">0.839</td>
<td style="text-align: right;">1.06e+00</td>
<td style="text-align: right;">0.598</td>
<td style="text-align: right;">1.88e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_ingredientesalgunas_veces</td>
<td style="text-align: right;">-0.135</td>
<td style="text-align: right;">0.294</td>
<td style="text-align: right;">-0.459</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">8.74e-01</td>
<td style="text-align: right;">0.492</td>
<td style="text-align: right;">1.55e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_ingredientesrara_vez</td>
<td style="text-align: right;">-0.105</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: right;">-0.345</td>
<td style="text-align: right;">0.730</td>
<td style="text-align: right;">9.01e-01</td>
<td style="text-align: right;">0.497</td>
<td style="text-align: right;">1.63e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_ingredientesnunca</td>
<td style="text-align: right;">-0.070</td>
<td style="text-align: right;">0.273</td>
<td style="text-align: right;">-0.256</td>
<td style="text-align: right;">0.798</td>
<td style="text-align: right;">9.32e-01</td>
<td style="text-align: right;">0.546</td>
<td style="text-align: right;">1.59e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalcasi_siempre</td>
<td style="text-align: right;">-0.097</td>
<td style="text-align: right;">0.289</td>
<td style="text-align: right;">-0.334</td>
<td style="text-align: right;">0.738</td>
<td style="text-align: right;">9.08e-01</td>
<td style="text-align: right;">0.515</td>
<td style="text-align: right;">1.60e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalalgunas_veces</td>
<td style="text-align: right;">-0.063</td>
<td style="text-align: right;">0.293</td>
<td style="text-align: right;">-0.216</td>
<td style="text-align: right;">0.829</td>
<td style="text-align: right;">9.39e-01</td>
<td style="text-align: right;">0.528</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalrara_vez</td>
<td style="text-align: right;">0.368</td>
<td style="text-align: right;">0.312</td>
<td style="text-align: right;">1.179</td>
<td style="text-align: right;">0.238</td>
<td style="text-align: right;">1.45e+00</td>
<td style="text-align: right;">0.784</td>
<td style="text-align: right;">2.66e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_tabla_nutricionalnunca</td>
<td style="text-align: right;">0.163</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: right;">0.617</td>
<td style="text-align: right;">0.537</td>
<td style="text-align: right;">1.18e+00</td>
<td style="text-align: right;">0.701</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_selloscasi_siempre</td>
<td style="text-align: right;">-0.018</td>
<td style="text-align: right;">0.227</td>
<td style="text-align: right;">-0.080</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">9.82e-01</td>
<td style="text-align: right;">0.629</td>
<td style="text-align: right;">1.53e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_sellosalgunas_veces</td>
<td style="text-align: right;">0.251</td>
<td style="text-align: right;">0.233</td>
<td style="text-align: right;">1.079</td>
<td style="text-align: right;">0.281</td>
<td style="text-align: right;">1.28e+00</td>
<td style="text-align: right;">0.815</td>
<td style="text-align: right;">2.03e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_sellosrara_vez</td>
<td style="text-align: right;">-0.457</td>
<td style="text-align: right;">0.275</td>
<td style="text-align: right;">-1.663</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">6.33e-01</td>
<td style="text-align: right;">0.369</td>
<td style="text-align: right;">1.08e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_sellosnunca</td>
<td style="text-align: right;">-0.318</td>
<td style="text-align: right;">0.189</td>
<td style="text-align: right;">-1.683</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">7.28e-01</td>
<td style="text-align: right;">0.503</td>
<td style="text-align: right;">1.05e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablescasi_siempre</td>
<td style="text-align: right;">0.211</td>
<td style="text-align: right;">0.250</td>
<td style="text-align: right;">0.841</td>
<td style="text-align: right;">0.401</td>
<td style="text-align: right;">1.23e+00</td>
<td style="text-align: right;">0.756</td>
<td style="text-align: right;">2.02e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesalgunas_veces</td>
<td style="text-align: right;">0.045</td>
<td style="text-align: right;">0.250</td>
<td style="text-align: right;">0.181</td>
<td style="text-align: right;">0.856</td>
<td style="text-align: right;">1.05e+00</td>
<td style="text-align: right;">0.641</td>
<td style="text-align: right;">1.71e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesrara_vez</td>
<td style="text-align: right;">0.430</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">1.592</td>
<td style="text-align: right;">0.111</td>
<td style="text-align: right;">1.54e+00</td>
<td style="text-align: right;">0.905</td>
<td style="text-align: right;">2.61e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frecuencia_de_v_mensajes_saludablesnunca</td>
<td style="text-align: right;">0.261</td>
<td style="text-align: right;">0.217</td>
<td style="text-align: right;">1.202</td>
<td style="text-align: right;">0.230</td>
<td style="text-align: right;">1.30e+00</td>
<td style="text-align: right;">0.848</td>
<td style="text-align: right;">1.99e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_agua_diabajo</td>
<td style="text-align: right;">-0.244</td>
<td style="text-align: right;">0.132</td>
<td style="text-align: right;">-1.849</td>
<td style="text-align: right;">0.064</td>
<td style="text-align: right;">7.84e-01</td>
<td style="text-align: right;">0.605</td>
<td style="text-align: right;">1.01e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_agua_diaadecuado</td>
<td style="text-align: right;">-0.111</td>
<td style="text-align: right;">0.103</td>
<td style="text-align: right;">-1.079</td>
<td style="text-align: right;">0.281</td>
<td style="text-align: right;">8.95e-01</td>
<td style="text-align: right;">0.732</td>
<td style="text-align: right;">1.09e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_bebidas_azucaradasocasional</td>
<td style="text-align: right;">0.110</td>
<td style="text-align: right;">0.098</td>
<td style="text-align: right;">1.116</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: right;">1.12e+00</td>
<td style="text-align: right;">0.920</td>
<td style="text-align: right;">1.35e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_bebidas_azucaradasfrecuente</td>
<td style="text-align: right;">-0.006</td>
<td style="text-align: right;">0.159</td>
<td style="text-align: right;">-0.040</td>
<td style="text-align: right;">0.968</td>
<td style="text-align: right;">9.94e-01</td>
<td style="text-align: right;">0.728</td>
<td style="text-align: right;">1.36e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_bebidas_azucaradasalto</td>
<td style="text-align: right;">0.221</td>
<td style="text-align: right;">0.235</td>
<td style="text-align: right;">0.941</td>
<td style="text-align: right;">0.347</td>
<td style="text-align: right;">1.25e+00</td>
<td style="text-align: right;">0.787</td>
<td style="text-align: right;">1.98e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_jugo_azucaradoocasional</td>
<td style="text-align: right;">-0.135</td>
<td style="text-align: right;">0.100</td>
<td style="text-align: right;">-1.353</td>
<td style="text-align: right;">0.176</td>
<td style="text-align: right;">8.74e-01</td>
<td style="text-align: right;">0.719</td>
<td style="text-align: right;">1.06e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">vasos_jugo_azucaradofrecuente</td>
<td style="text-align: right;">0.187</td>
<td style="text-align: right;">0.166</td>
<td style="text-align: right;">1.128</td>
<td style="text-align: right;">0.259</td>
<td style="text-align: right;">1.21e+00</td>
<td style="text-align: right;">0.871</td>
<td style="text-align: right;">1.67e+00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vasos_jugo_azucaradoalto</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: right;">0.268</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">0.341</td>
<td style="text-align: right;">1.29e+00</td>
<td style="text-align: right;">0.763</td>
<td style="text-align: right;">2.18e+00</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceiteaceite_vegetal_maravilla_maiz_pepa_de_uva</td>
<td style="text-align: right;">14.425</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">0.955</td>
<td style="text-align: right;">1.84e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">7.32e+222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceiteaceite_de_oliva</td>
<td style="text-align: right;">14.149</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.956</td>
<td style="text-align: right;">1.40e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">5.55e+222</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceitemanteca</td>
<td style="text-align: right;">15.382</td>
<td style="text-align: right;">254.462</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">0.952</td>
<td style="text-align: right;">4.79e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.92e+223</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceitemantequilla</td>
<td style="text-align: right;">14.257</td>
<td style="text-align: right;">254.460</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.955</td>
<td style="text-align: right;">1.55e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">6.20e+222</td>
</tr>
<tr class="even">
<td style="text-align: left;">tipo_de_aceitemargarina</td>
<td style="text-align: right;">14.683</td>
<td style="text-align: right;">254.459</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">0.954</td>
<td style="text-align: right;">2.38e+06</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">9.48e+222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tipo_de_aceiteotro_especifique</td>
<td style="text-align: right;">0.020</td>
<td style="text-align: right;">498.118</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">1.02e+00</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">Inf</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>